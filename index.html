<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç‘¶ç‘¶å»å“ªå„¿ç©ï¼Ÿ(å¹¿ä¸œç‰ˆ)</title>

  <!-- 1) Tailwindï¼ˆCDNï¼‰ -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 2) åº†ç¥ç‰¹æ•ˆåº“ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    body{
      font-family: -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
      background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
      min-height: 100vh;
    }

    .card-shadow{
      box-shadow: 0 20px 40px -5px rgba(59,130,246,.15);
    }

    /* ç»“æœå±•ç¤ºåŠ¨ç”» */
    @keyframes popIn{
      0%{ transform: scale(.92); opacity: 0; }
      100%{ transform: scale(1); opacity: 1; }
    }
    .animate-pop{
      animation: popIn .45s cubic-bezier(.175,.885,.32,1.275) forwards;
    }

    /* æ—‹è½¬æ—¶çš„æ¨¡ç³Šæ•ˆæœ */
    .spinning-text{
      filter: blur(2px);
      opacity: .75;
    }
  </style>
</head>

<body class="flex flex-col items-center justify-center min-h-screen p-4 text-slate-800">

  <main class="w-full max-w-md bg-white rounded-3xl card-shadow overflow-hidden border-2 border-indigo-50 relative">

    <!-- é¡¶éƒ¨å›¾ç‰‡ -->
    <div class="relative w-full h-64 overflow-hidden group">
      <!-- å¤–é“¾ç¤ºä¾‹ï¼šå¦‚æœç½‘ç»œæºç«™é™åˆ¶ï¼Œå¯èƒ½ä¸æ˜¾ç¤º -->
      <img
        src="https://picx.zhimg.com/100/v2-4209022bcb7836a02cf85a79bc37fa0f_r.jpg"
        class="w-full h-full object-cover transform transition duration-700 hover:scale-105"
        onerror="this.onerror=null; this.src='images/hero.jpg';"
        alt="header"
      />

      <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>

      <div class="absolute bottom-4 left-4 text-white">
        <h1 class="text-2xl font-black tracking-wider text-yellow-300 drop-shadow-md">ç‘¶ç‘¶å»å“ªå„¿ç©ï¼Ÿ(å¹¿ä¸œç‰ˆ)</h1>
        <p class="text-sm font-medium opacity-90">ç›²ç›’æŠ½å–ç›®çš„åœ° Â· æƒŠå–œå¼€å¯æ–°æ—…ç¨‹</p>
      </div>
    </div>

    <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
    <div id="result-area" class="p-6 text-center min-h-[360px] flex flex-col justify-start items-center transition-all duration-300 relative">

      <!-- è£…é¥°èƒŒæ™¯å›¾æ ‡ -->
      <div class="absolute top-10 opacity-5 pointer-events-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-64 w-64" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
        </svg>
      </div>

      <!-- åˆå§‹ç­‰å¾…çŠ¶æ€ -->
      <div id="placeholder-content" class="py-12 z-10">
        <div class="inline-block p-4 rounded-full bg-blue-50 mb-4 animate-bounce">
          <span class="text-4xl">ğŸ²</span>
        </div>
        <p class="text-xl font-bold text-slate-700">å‡†å¤‡å¥½å‡ºå‘äº†å—ï¼Ÿ</p>
        <p class="text-slate-400 text-sm mt-2">ç‚¹å‡»æŒ‰é’®å¼€å§‹æ»šåŠ¨ï¼Œå†ç‚¹ä¸€æ¬¡åœæ­¢æŠ½å–</p>
      </div>

      <!-- æŠ½å¥–ç»“æœå†…å®¹ï¼ˆåˆå§‹éšè—ï¼‰ -->
      <div id="city-content" class="hidden w-full z-10 text-left">
        <div class="text-center mb-6">
          <span class="inline-block px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full mb-2 uppercase tracking-wide">
            DESTINATION
          </span>
          <h2 id="city-name" class="text-5xl font-black text-indigo-600 mb-2 drop-shadow-sm">åŸå¸‚å</h2>
          <p id="city-slogan" class="text-slate-500 font-medium italic">è¿™é‡Œæ˜¯åŸå¸‚æ ‡è¯­</p>
        </div>

        <div class="bg-indigo-50/50 rounded-2xl p-5 border border-indigo-100 space-y-4">
          <div>
            <div class="flex items-center gap-2 mb-1">
              <span class="text-xl">ğŸ¡</span>
              <span class="font-bold text-indigo-900 text-sm">æ¨èå¥½ç©ç‚¹</span>
            </div>
            <p id="city-spots" class="text-slate-700 text-sm leading-relaxed pl-8">æ™¯ç‚¹åˆ—è¡¨...</p>
          </div>

          <div class="border-t border-indigo-100 pt-3">
            <div class="flex items-center gap-2 mb-1">
              <span class="text-xl">ğŸ¥•</span>
              <span class="font-bold text-indigo-900 text-sm">æ¨èç¾é£Ÿ</span>
            </div>
            <p id="city-food" class="text-slate-700 text-sm leading-relaxed pl-8">ç¾é£Ÿåˆ—è¡¨...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- å•æŒ‰é’®åŒºåŸŸ -->
    <div class="p-5 bg-white border-t border-slate-100 z-20 relative">
      <button id="action-btn"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-2xl shadow-blue-200 shadow-lg transform transition active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300 flex items-center justify-center gap-2"
      >
        <span id="btn-icon" class="text-xl">ğŸš€</span>
        <span id="btn-text" class="text-lg tracking-wide">å¼€å§‹éšæœºæŠ½å–</span>
      </button>
    </div>
  </main>

  <footer class="mt-6 text-slate-400 text-xs font-medium">
    &copy; 2025 QIUCHENG
  </footer>

  <script>
    // åŸå¸‚æ•°æ®ï¼ˆçº¯æ–‡æœ¬ï¼‰
    const cities = [
      { name:"å¹¿å·", slogan:"ç¾ŠåŸ / å¹æ—©èŒ¶", spots:"å¹¿å·å¡”ã€æ°¸åº†åŠã€é•¿éš†ã€é™ˆå®¶ç¥ ", food:"è™¾é¥ºã€å¹²ç‚’ç‰›æ²³ã€è‰‡ä»”ç²¥ã€çƒ§é¹…" },
      { name:"æ·±åœ³", slogan:"ç§‘æŠ€ä¹‹éƒ½ / æµ·è¾¹ä¹Ÿå¾ˆä¼šç©", spots:"æ·±åœ³æ¹¾å…¬å›­ã€åä¾¨åŸåˆ›æ„å›­ã€å¤§é¹åŠå²›", food:"æ¤°å­é¸¡ã€æ½®æ±•ç‰›è‚‰ç«é”…ã€çƒ§è…Š" },
      { name:"ç æµ·", slogan:"ç™¾å²›ä¹‹å¸‚ / æµªæ¼«æµ·å²¸", spots:"æƒ…ä¾£è·¯ã€æ—¥æœˆè´ã€é•¿éš†æµ·æ´‹ç‹å›½", food:"æ¨ªç´èšã€æµ·é²œå¤§é¤ã€ç³–æ°´" },
      { name:"æ±•å¤´", slogan:"ç¾é£Ÿé«˜å¯†åº¦ / é€›åƒå¤©å ‚", spots:"å—æ¾³å²›ã€å°å…¬å›­éª‘æ¥¼ã€æµ·æ»¨é•¿å»Š", food:"ç‰›è‚‰ç«é”…ã€ç”Ÿè…Œã€èšçƒ™ã€å¤é¹…" },
      { name:"ä½›å±±", slogan:"åŠŸå¤«ä¹‹åŸ / å¯»å‘³é¡ºå¾·", spots:"ç¥–åº™ã€å²­å—å¤©åœ°ã€æ¸…æ™–å›­", food:"åŒçš®å¥¶ã€é™ˆæ‘ç²‰ã€é±¼ç”Ÿã€ä¼¦æ•™ç³•" },
      { name:"æƒ å·", slogan:"åŠåŸå±±è‰²åŠåŸæ¹–", spots:"æƒ å·è¥¿æ¹–ã€å·½å¯®æ¹¾ã€åŒæœˆæ¹¾", food:"å®¢å®¶é…¿è±†è…ã€æ¢…èœæ‰£è‚‰ã€ç›ç„—é¸¡" },
      { name:"ä¸œè", slogan:"è½»æˆ·å¤–ä¹Ÿå¾ˆçˆ½", spots:"æ¾å±±æ¹–ã€å¯å›­ã€ä¸‹ååŠ", food:"çƒ§é¹…æ¿‘ç²‰ã€é“æ»˜è‚‰ä¸¸ã€ç³–æ°´" },
      { name:"ä¸­å±±", slogan:"ä¼Ÿäººæ•…é‡Œ / æ‚ é—²æ…¢åŸ", spots:"å­™ä¸­å±±æ•…å±…ã€å­™æ–‡è¥¿è·¯ã€å²æ±Ÿå¤œæ™¯", food:"çŸ³å²ä¹³é¸½ã€è„†è‚‰é²©ã€æä»é¥¼" },
      { name:"æ±Ÿé—¨", slogan:"ä¾¨ä¹¡é£æƒ… / ç¢‰æ¥¼å‡ºç‰‡", spots:"å¼€å¹³ç¢‰æ¥¼ã€èµ¤åå¤é•‡ã€ä¸‰åä¸‰å¢Ÿè¡—", food:"é™ˆçš®é¸­ã€é»„é³é¥­ã€å¤äº•çƒ§é¹…" },
      { name:"æ½®å·", slogan:"å¤åŸéŸµå‘³ / å·¥å¤«èŒ¶", spots:"å¹¿æµæ¡¥ã€ç‰ŒåŠè¡—ã€éŸ©æ–‡å…¬ç¥ ", food:"å¤å‘³ã€ç ‚é”…ç²¥ã€é¸­æ¯æ»" },
      { name:"æ¹›æ±Ÿ", slogan:"æµ·é£å¤§æ’æ¡£ / æµ·é²œä¹‹éƒ½", spots:"é‡‘æ²™æ¹¾ã€èµ¤åè€è¡—ã€æ¹–å…‰å²©", food:"ç”Ÿèšã€ç™½åˆ‡é¸¡ã€æ²™è™«ç²¥" },
      { name:"è‚‡åº†", slogan:"å²­å—å±±æ°´ / ç šéƒ½", spots:"ä¸ƒæ˜Ÿå²©ã€é¼æ¹–å±±ã€å®‹åŸå¢™", food:"è£¹è’¸ç²½ã€æ²³é²œã€è±†è…èŠ±" },
      { name:"èŒ‚å", slogan:"æ»¨æµ·ç»¿åŸ / è”æä¹‹ä¹¡", spots:"ä¸­å›½ç¬¬ä¸€æ»©ã€æ”¾é¸¡å²›ã€æµªæ¼«æµ·å²¸", food:"åŒ–å·ç³–æ°´ã€æ°´ä¸œé¸­ç²¥ã€æç²‰" },
      { name:"æ¢…å·", slogan:"ä¸–ç•Œå®¢éƒ½ / ä½è°ƒå¥½åƒ", spots:"å®¢å¤©ä¸‹ã€é›å—é£ã€å›´é¾™å±‹", food:"å®¢å®¶è…Œé¢ã€ç›ç„—é¸¡ã€é…¿è±†è…" },
      { name:"éŸ¶å…³", slogan:"ä¸¹éœåœ°è²Œ / å±±æ°´ç¦…æ„", spots:"ä¸¹éœå±±ã€å—åå¯ºã€ç ç‘å¤å··", food:"é…¸ç¬‹é¸­ã€å¤§å¡˜æ‰£è‚‰ã€æ²¹ç½©ç³" },
      { name:"æ²³æº", slogan:"ä¸‡ç»¿ä¹‹éƒ½ / äº²æ°´æ…¢æ¸¸", spots:"ä¸‡ç»¿æ¹–ã€å·´ä¼åˆ©äºšåº„å›­", food:"ä¸œæ±Ÿé…¿è±†è…ã€çŒªè„šç²‰ã€äº”æŒ‡æ¯›æ¡ƒæ±¤" },
      { name:"é˜³æ±Ÿ", slogan:"æµ·é™µå²› / çœ‹æ—¥è½", spots:"æµ·é™µå²›ã€åé‡Œé“¶æ»©ã€å¤§è§’æ¹¾", food:"çŒªè‚ ç¢Œã€ç¨‹æ‘èšã€æµ·èƒ†é¥­" },
      { name:"æ¸…è¿œ", slogan:"æ¼‚æµä¹‹ä¹¡ / æ¸©æ³‰ä¹‹åŸ", spots:"å¤é¾™å³¡æ¼‚æµã€è‹±è¥¿å³°æ—ã€è¿å·åœ°ä¸‹æ²³", food:"æ¸…è¿œé¸¡ã€åŒ—æ±Ÿæ²³é²œã€åˆ€åˆ‡ç³" },
      { name:"æ±•å°¾", slogan:"æµ·è¾¹å‘å‘† / æ¾å¼›æ„Ÿ", spots:"çº¢æµ·æ¹¾ã€é‡‘ç”ºæ¹¾ã€ç„æ­¦å±±", food:"æµ·é²œã€èœèŒ¶ã€è–„é¥¼" },
      { name:"æ­é˜³", slogan:"å²­å—æ°´åŸ / ç‰éƒ½", spots:"æ­é˜³æ¥¼ã€è¿›è´¤é—¨ã€é»„å²å±±", food:"ç²¿æ±ã€ä¹’ä¹“ç²¿ã€åæ²™èŠ‹" },
      { name:"äº‘æµ®", slogan:"ç¦…å®—æ•…é‡Œ / çŸ³éƒ½", spots:"å›½æ©å¯ºã€å¤©éœ²å±±ã€èŸ é¾™æ´", food:"çš±çº±é±¼è…ã€è£¹è’¸ç²½ã€å†œå®¶èœ" }
    ];

    // DOM
    const btn = document.getElementById('action-btn');
    const btnText = document.getElementById('btn-text');
    const btnIcon = document.getElementById('btn-icon');
    const placeholder = document.getElementById('placeholder-content');
    const cityContent = document.getElementById('city-content');

    const domName = document.getElementById('city-name');
    const domSlogan = document.getElementById('city-slogan');
    const domSpots = document.getElementById('city-spots');
    const domFood = document.getElementById('city-food');

    // çŠ¶æ€
    let timer = null;
    let isSpinning = false;
    let isStopping = false;

    function pickRandom(){
      return cities[Math.floor(Math.random() * cities.length)];
    }

    function updateDisplay(city){
      domName.innerText = city.name;
      domSlogan.innerText = city.slogan;
      domSpots.innerText = city.spots;
      domFood.innerText = city.food;
    }

    function setBtnToStop(){
      btn.classList.add('bg-red-500', 'hover:bg-red-600', 'ring-red-300');
      btn.classList.remove('bg-blue-600', 'hover:bg-blue-700', 'ring-blue-300');
      btnText.innerText = "åœæ­¢æŠ½å–";
      btnIcon.innerText = "ğŸ›‘";
    }

    function setBtnToAgain(){
      btn.classList.remove('bg-red-500', 'hover:bg-red-600', 'ring-red-300');
      btn.classList.add('bg-blue-600', 'hover:bg-blue-700', 'ring-blue-300');
      btnText.innerText = "å†æŠ½ä¸€æ¬¡";
      btnIcon.innerText = "ğŸ”„";
    }

    function startSpin(){
      isSpinning = true;
      isStopping = false;

      setBtnToStop();

      placeholder.classList.add('hidden');
      cityContent.classList.remove('hidden', 'animate-pop');

      // æ¨¡ç³Šæ»šåŠ¨
      cityContent.classList.add('spinning-text');

      if (timer) clearInterval(timer);
      timer = setInterval(() => {
        updateDisplay(pickRandom());
      }, 50);
    }

    // âœ… æ›´çŸ­çš„å‡é€Ÿåœä¸‹ï¼ˆä¼˜åŒ–ï¼šå‡å°‘æ­¥æ•° + ç¼©çŸ­æ€»æ—¶é•¿ï¼‰
    function stopSpin(){
      if (!isSpinning || isStopping) return;
      isStopping = true;

      clearInterval(timer);
      timer = null;

      // âœ… è¿™é‡Œæ˜¯ä½ è¦çš„æ–¹æ¡ˆï¼šæ›´çŸ­ã€æ›´åˆ©è½
      const steps = [55, 75, 110, 160];
      let i = 0;

      function slowTick(){
        updateDisplay(pickRandom());
        if (i < steps.length - 1){
          i++;
          setTimeout(slowTick, steps[i]);
        } else {
          finalizeStop();
        }
      }

      setTimeout(slowTick, steps[0]);
    }

    function finalizeStop(){
      isSpinning = false;
      isStopping = false;

      // æœ€ç»ˆç»“æœå†éšæœºä¸€æ¬¡ï¼ˆæ›´åƒå¼€å¥–ï¼‰
      updateDisplay(pickRandom());

      setBtnToAgain();

      // å»æ¨¡ç³Š + å¼¹å…¥
      cityContent.classList.remove('spinning-text');
      void cityContent.offsetWidth;
      cityContent.classList.add('animate-pop');

      // âœ… é˜²æŠ¤ï¼šconfetti åŠ è½½å¤±è´¥ä¹Ÿä¸å½±å“ä¸»åŠŸèƒ½
      if (typeof confetti === "function") triggerConfetti();
      else console.warn("confetti æœªåŠ è½½æˆåŠŸï¼šè¯·æ£€æŸ¥ç½‘ç»œ/CDNã€‚");
    }

    function toggleSpin(){
      if (isSpinning) stopSpin();
      else startSpin();
    }

    function triggerConfetti(){
      const duration = 2200;
      const animationEnd = Date.now() + duration;
      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 999 };

      function randomInRange(min, max){ return Math.random() * (max - min) + min; }

      const interval = setInterval(() => {
        const timeLeft = animationEnd - Date.now();
        if (timeLeft <= 0) return clearInterval(interval);

        const particleCount = 60 * (timeLeft / duration);

        confetti(Object.assign({}, defaults, {
          particleCount,
          origin: { x: randomInRange(0.10, 0.30), y: Math.random() - 0.2 },
          colors: ['#3b82f6', '#fbbf24', '#f87171', '#34d399']
        }));
        confetti(Object.assign({}, defaults, {
          particleCount,
          origin: { x: randomInRange(0.70, 0.90), y: Math.random() - 0.2 },
          colors: ['#3b82f6', '#fbbf24', '#f87171', '#34d399']
        }));
      }, 220);
    }

    btn.addEventListener('click', toggleSpin);
  </script>
</body>
</html>
